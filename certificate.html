<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FDP Participation Certificate | MLRIT</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            max-width: 600px;
            width: 100%;
            text-align: center;
        }

        h1 {
            color: #333;
            margin-bottom: 30px;
            font-size: 2.5em;
            font-weight: 300;
        }

        .input-group {
            margin-bottom: 30px;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #555;
            font-size: 1.1em;
            font-weight: 500;
        }

        input[type="text"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1em;
            transition: all 0.3s ease;
            background: #fafafa;
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #667eea;
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.1);
        }

        .preview-section {
            margin: 30px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 15px;
            border: 2px dashed #ddd;
        }

        .certificate-container {
            position: relative;
            display: inline-block;
            max-width: 100%;
            margin: 20px 0;
            border: 2px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
            background: #ffffff;
        }

        .certificate-template {
            max-width: 100%;
            height: auto;
            display: block;
        }

        .name-overlay {
            position: absolute;
            font-size: 25px;
            font-weight: bold;
            color: #222;
            font-family: 'Georgia', serif;
            text-align: center;
            top: 43%;
            left: 50%;
            transform: translate(-50%, -50%);
            white-space: nowrap;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
            z-index: 10;
        }

        .designation-college-overlay {
            position: absolute;
            font-size: 15px;
            font-weight: normal;
            color: #222;
            font-family: 'Georgia', serif;
            text-align: center;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            white-space: nowrap;
            text-shadow: 1px 1px 2px rgba(255,255,255,0.5);
            z-index: 10;
        }

        .download-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2em;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .download-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 30px rgba(102, 126, 234, 0.4);
        }

        .download-btn:active {
            transform: translateY(0);
        }

        .download-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .instructions {
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #2196F3;
            text-align: left;
        }

        @media (max-width: 600px) {
            .container {
                padding: 20px;
                margin: 10px;
            }

            h1 {
                font-size: 2em;
            }

            .name-overlay {
                font-size: 20px;
            }

            .designation-college-overlay {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>MLRIT<br>FDP Participation Certificate</h1>
        
        <div class="instructions">
            <strong>Instructions:</strong> Fill in the required information below. Only the name field is mandatory.
        </div>

        <div class="input-group">
            <label for="userName">Enter Your Name: *</label>
            <input type="text" id="userName" placeholder="Ex: Dr. John Doe" maxlength="50">
        </div>

        <div class="input-group">
            <label for="designation">Designation:</label>
            <input type="text" id="designation" placeholder="Ex: Professor, Assistant Professor" maxlength="50">
        </div>

        <div class="input-group">
            <label for="college">College Name:</label>
            <input type="text" id="college" placeholder="Ex: MLRIT" maxlength="50">
        </div>

        <div class="preview-section">
            <h3>Certificate Preview:</h3>
            <div class="certificate-container">
                <img class="certificate-template" id="certificateTemplate" src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAwIiBoZWlnaHQ9IjYwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjhmOWZhIi8+CiAgPHJlY3QgeD0iMjAiIHk9IjIwIiB3aWR0aD0iNzYwIiBoZWlnaHQ9IjU2MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjMmM1YWEwIiBzdHJva2Utd2lkdGg9IjgiLz4KICA8cmVjdCB4PSIzNSIgeT0iMzUiIHdpZHRoPSI3MzAiIGhlaWdodD0iNTMwIiBmaWxsPSJub25lIiBzdHJva2U9IiMyYzVhYTAiIHN0cm9rZS13aWR0aD0iMiIvPgogIDx0ZXh0IHg9IjQwMCIgeT0iMTUwIiBmb250LWZhbWlseT0iR2VvcmdpYSIgZm9udC1zaXplPSI0OCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IiMyYzVhYTAiIHRleHQtYW5jaG9yPSJtaWRkbGUiPkNFUlRJRklDQVRFIE9GIEFDSEVDU0VNRU5UPC90ZXh0PgogIDx0ZXh0IHg9IjQwMCIgeT0iMjIwIiBmb250LWZhbWlseT0iR2VvcmdpYSIgZm9udC1zaXplPSIyNCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+VGhpcyBpcyB0byBjZXJ0aWZ5IHRoYXQ8L3RleHQ+CiAgPHJlY3QgeD0iMjAwIiB5PSIyODAiIHdpZHRoPSI0MDAiIGhlaWdodD0iNjAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2RkZCIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtZGFzaGFycmF5PSI1LDUiLz4KICA8dGV4dCB4PSI0MDAiIHk9IjQyMCIgZm9udC1mYW1pbHk9Ikdlb3JnaWEiIGZvbnQtc2l6ZT0iMjAiIGZpbGw9IiMzMzMiIHRleHQtYW5jaG9yPSJtaWRkbGUiPmhhcyBzdWNjZXNzZnVsbHkgY29tcGxldGVkIHRoZSBjb3Vyc2UgcmVxdWlyZW1lbnRzPC90ZXh0PgogIDx0ZXh0IHg9IjQwMCIgeT0iNDUwIiBmb250LWZhbWlseT0iR2VvcmdpYSIgZm9udC1zaXplPSIyMCIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+YW5kIGlzIGhlcmVieSBhd2FyZGVkIHRoaXMgY2VydGlmaWNhdGU8L3RleHQ+CiAgPHRleHQgeD0iMTUwIiB5PSI1MjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzMzMyI+RGF0ZTogPC90ZXh0PgogIDxsaW5lIHgxPSI1NTAiIHkxPSI1MjAiIHgyPSI3MDAiIHkyPSI1MjAiIHN0cm9rZT0iIzMzMyIgc3Ryb2tlLXdpZHRoPSIxIi8+CiAgPHRleHQgeD0iNjI1IiB5PSI1NDAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNiIgZmlsbD0iIzMzMyIgdGV4dC1hbmNob3I9Im1pZGRsZSI+RGlyZWN0b3I8L3RleHQ+Cjwvc3ZnPgo=" alt="Certificate Template">
                <div class="name-overlay" id="nameOverlay">Enter your name above</div>
                <div class="designation-college-overlay" id="designationCollegeOverlay">Enter designation and college</div>
            </div>
        </div>

        <button class="download-btn" id="downloadBtn" onclick="downloadPDF()">
            ðŸ“„ Download Certificate PDF
        </button>
    </div>

    <script>
        // ==================== DEVELOPER CONFIGURATION ====================
        
        // Path to your certificate template image (PNG/JPG)
        const TEMPLATE_IMAGE_PATH = 'sample-certificate.png';
        
        // Certificate template configuration
        const CERTIFICATE_CONFIG = {
            // Coordinates where the text should appear (as percentages)
            namePosition: {
                x: 50, // 50% from left
                y: 46  // 47% from top
            },
            designationCollegePosition: {
                x: 50, // 50% from left
                y: 51  // 52% from top
            },
            // Text styling for PDF
            textStyle: {
                name: {
                    fontSize: 90,
                    fontFamily: 'Georgia',
                    color: '#222',
                    fontWeight: 'bold'
                },
                designationCollege: {
                    fontSize: 49,
                    fontFamily: 'Georgia',
                    color: '#222',
                    fontWeight: 'normal'
                }
            }
        };
        
        // ==================== END CONFIGURATION ====================

        let templateImageLoaded = false;
        
        // Load the certificate template
        function loadCertificateTemplate() {
            const templateImg = document.getElementById('certificateTemplate');
            
            // Try to load your custom template
            const customTemplate = new Image();
            customTemplate.onload = function() {
                templateImg.src = TEMPLATE_IMAGE_PATH;
                templateImageLoaded = true;
                console.log('Custom certificate template loaded successfully!');
            };
            customTemplate.onerror = function() {
                console.log('Custom template not found, using default template');
                // Keep the default SVG template that's already loaded
                templateImageLoaded = true;
            };
            customTemplate.src = TEMPLATE_IMAGE_PATH;
        }

        // Update fields in preview
        function updatePreview() {
            const name = document.getElementById('userName').value.trim();
            const designation = document.getElementById('designation').value.trim();
            const college = document.getElementById('college').value.trim();
            
            const nameOverlay = document.getElementById('nameOverlay');
            const designationCollegeOverlay = document.getElementById('designationCollegeOverlay');
            const downloadBtn = document.getElementById('downloadBtn');
            
            // Update name
            if (name) {
                nameOverlay.textContent = name;
                nameOverlay.style.display = 'block';
            } else {
                nameOverlay.textContent = 'Enter your name above';
                nameOverlay.style.display = 'block';
            }
            
            // Update designation and college on same line
            let designationCollegeText = '';
            if (designation && college) {
                designationCollegeText = `${designation}, ${college}`;
            } else if (designation) {
                designationCollegeText = designation;
            } else if (college) {
                designationCollegeText = college;
            } else {
                designationCollegeText = 'Enter designation and college';
            }
            
            designationCollegeOverlay.textContent = designationCollegeText;
            designationCollegeOverlay.style.display = 'block';
            
            // Enable download button only if name is filled
            downloadBtn.disabled = !name;
        }

        // Add event listeners to all input fields
        document.getElementById('userName').addEventListener('input', updatePreview);
        document.getElementById('designation').addEventListener('input', updatePreview);
        document.getElementById('college').addEventListener('input', updatePreview);

        // Initialize download button state
        document.getElementById('downloadBtn').disabled = true;

        function downloadPDF() {
            const name = document.getElementById('userName').value.trim();
            const designation = document.getElementById('designation').value.trim();
            const college = document.getElementById('college').value.trim();
            
            if (!name) {
                alert('Please enter your name first!');
                return;
            }

            const { jsPDF } = window.jspdf;
            const templateImg = document.getElementById('certificateTemplate');
            
            // Create a canvas to draw the certificate
            const canvas = document.createElement('canvas');
            const ctx = canvas.getContext('2d');
            
            // Set canvas size to match the template image
            canvas.width = templateImg.naturalWidth || 800;
            canvas.height = templateImg.naturalHeight || 600;
            
            // Draw the template image
            ctx.drawImage(templateImg, 0, 0, canvas.width, canvas.height);
            
            // Set text properties
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            
            // Draw name
            ctx.font = `${CERTIFICATE_CONFIG.textStyle.name.fontWeight} ${CERTIFICATE_CONFIG.textStyle.name.fontSize}px ${CERTIFICATE_CONFIG.textStyle.name.fontFamily}`;
            ctx.fillStyle = CERTIFICATE_CONFIG.textStyle.name.color;
            
            const nameX = canvas.width * (CERTIFICATE_CONFIG.namePosition.x / 100);
            const nameY = canvas.height * (CERTIFICATE_CONFIG.namePosition.y / 100);
            ctx.fillText(name, nameX, nameY);
            
            // Draw designation and college on same line
            let designationCollegeText = '';
            if (designation && college) {
                designationCollegeText = `${designation}, ${college}`;
            } else if (designation) {
                designationCollegeText = designation;
            } else if (college) {
                designationCollegeText = college;
            }
            
            if (designationCollegeText) {
                ctx.font = `${CERTIFICATE_CONFIG.textStyle.designationCollege.fontWeight} ${CERTIFICATE_CONFIG.textStyle.designationCollege.fontSize}px ${CERTIFICATE_CONFIG.textStyle.designationCollege.fontFamily}`;
                ctx.fillStyle = CERTIFICATE_CONFIG.textStyle.designationCollege.color;
                
                const designationCollegeX = canvas.width * (CERTIFICATE_CONFIG.designationCollegePosition.x / 100);
                const designationCollegeY = canvas.height * (CERTIFICATE_CONFIG.designationCollegePosition.y / 100);
                ctx.fillText(designationCollegeText, designationCollegeX, designationCollegeY);
            }
            
            // Create PDF
            const imgData = canvas.toDataURL('image/png');
            
            // Determine orientation based on canvas dimensions
            const isLandscape = canvas.width > canvas.height;
            const doc = new jsPDF({
                orientation: isLandscape ? 'landscape' : 'portrait',
                unit: 'mm',
                format: 'a4'
            });

            // Calculate dimensions to fit A4
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            const canvasRatio = canvas.width / canvas.height;
            const pageRatio = pageWidth / pageHeight;
            
            let imgWidth, imgHeight;
            if (canvasRatio > pageRatio) {
                imgWidth = pageWidth - 20; // 10mm margin on each side
                imgHeight = imgWidth / canvasRatio;
            } else {
                imgHeight = pageHeight - 20; // 10mm margin top/bottom
                imgWidth = imgHeight * canvasRatio;
            }
            
            const imgX = (pageWidth - imgWidth) / 2;
            const imgY = (pageHeight - imgHeight) / 2;

            // Add the certificate to PDF
            doc.addImage(imgData, 'PNG', imgX, imgY, imgWidth, imgHeight);

            // Save the PDF
            doc.save(`FDP_Certificate_${name.replace(/\s+/g, '_')}.pdf`);
        }

        // Allow Enter key to trigger download
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && !document.getElementById('downloadBtn').disabled) {
                downloadPDF();
            }
        });

        // Initialize when page loads
        window.addEventListener('load', function() {
            loadCertificateTemplate();
        });
    </script>
</body>
</html>